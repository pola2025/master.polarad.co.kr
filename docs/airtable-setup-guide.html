<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Airtable í†µê³„ ìºì‹œ ì„¤ì • ê°€ì´ë“œ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .copy-btn:active { transform: scale(0.95); }
        .step-complete { background: #10B981 !important; border-color: #10B981 !important; }
        .step-complete::after { content: 'âœ“'; color: white; }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="max-w-4xl mx-auto py-8 px-4">
        <!-- Header -->
        <div class="bg-gradient-to-r from-purple-600 to-indigo-600 rounded-2xl p-8 mb-8 text-white">
            <h1 class="text-3xl font-bold mb-2">ğŸ“Š Airtable í†µê³„ ìºì‹œ ì„¤ì •</h1>
            <p class="text-purple-100">Google Analytics ë°ì´í„°ë¥¼ Airtableì— ì €ì¥í•˜ì—¬ API í˜¸ì¶œì„ ìµœì†Œí™”í•©ë‹ˆë‹¤</p>
        </div>

        <!-- Progress -->
        <div class="bg-white rounded-xl p-6 mb-8 shadow-sm">
            <h2 class="text-lg font-semibold mb-4">ì§„í–‰ ìƒí™©</h2>
            <div class="flex items-center gap-2">
                <div id="step1-dot" class="w-8 h-8 rounded-full border-2 border-gray-300 flex items-center justify-center text-sm font-medium cursor-pointer hover:border-purple-400" onclick="toggleStep(1)">1</div>
                <div class="flex-1 h-1 bg-gray-200"></div>
                <div id="step2-dot" class="w-8 h-8 rounded-full border-2 border-gray-300 flex items-center justify-center text-sm font-medium cursor-pointer hover:border-purple-400" onclick="toggleStep(2)">2</div>
                <div class="flex-1 h-1 bg-gray-200"></div>
                <div id="step3-dot" class="w-8 h-8 rounded-full border-2 border-gray-300 flex items-center justify-center text-sm font-medium cursor-pointer hover:border-purple-400" onclick="toggleStep(3)">3</div>
                <div class="flex-1 h-1 bg-gray-200"></div>
                <div id="step4-dot" class="w-8 h-8 rounded-full border-2 border-gray-300 flex items-center justify-center text-sm font-medium cursor-pointer hover:border-purple-400" onclick="toggleStep(4)">4</div>
            </div>
            <div class="flex justify-between mt-2 text-xs text-gray-500">
                <span>Base ìƒì„±</span>
                <span>í…Œì´ë¸” ìƒì„±</span>
                <span>API í‚¤ ë°œê¸‰</span>
                <span>í™˜ê²½ë³€ìˆ˜</span>
            </div>
        </div>

        <!-- Step 1: Base ìƒì„± -->
        <div class="bg-white rounded-xl p-6 mb-6 shadow-sm">
            <div class="flex items-center gap-3 mb-4">
                <span class="w-8 h-8 bg-purple-100 text-purple-600 rounded-full flex items-center justify-center font-bold">1</span>
                <h2 class="text-xl font-semibold">Airtable Base ìƒì„±</h2>
            </div>

            <div class="space-y-4">
                <div class="flex items-start gap-3">
                    <div class="w-6 h-6 rounded-full bg-gray-100 flex items-center justify-center text-sm mt-0.5">1</div>
                    <div>
                        <p class="font-medium">Airtable ì ‘ì†</p>
                        <a href="https://airtable.com" target="_blank" class="text-purple-600 hover:underline text-sm">https://airtable.com â†’</a>
                    </div>
                </div>

                <div class="flex items-start gap-3">
                    <div class="w-6 h-6 rounded-full bg-gray-100 flex items-center justify-center text-sm mt-0.5">2</div>
                    <div>
                        <p class="font-medium">ìƒˆ Base ìƒì„±</p>
                        <p class="text-gray-600 text-sm">ì¢Œì¸¡ ìƒë‹¨ <span class="bg-gray-100 px-2 py-0.5 rounded">+ Create</span> â†’ <span class="bg-gray-100 px-2 py-0.5 rounded">Start from scratch</span></p>
                    </div>
                </div>

                <div class="flex items-start gap-3">
                    <div class="w-6 h-6 rounded-full bg-gray-100 flex items-center justify-center text-sm mt-0.5">3</div>
                    <div>
                        <p class="font-medium">Base ì´ë¦„ ì„¤ì •</p>
                        <div class="flex items-center gap-2 mt-1">
                            <code class="bg-gray-100 px-3 py-1 rounded text-sm">polarad-analytics-cache</code>
                            <button onclick="copyText('polarad-analytics-cache')" class="copy-btn text-xs bg-purple-100 text-purple-600 px-2 py-1 rounded hover:bg-purple-200">ë³µì‚¬</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 2: í…Œì´ë¸” ìƒì„± -->
        <div class="bg-white rounded-xl p-6 mb-6 shadow-sm">
            <div class="flex items-center gap-3 mb-4">
                <span class="w-8 h-8 bg-purple-100 text-purple-600 rounded-full flex items-center justify-center font-bold">2</span>
                <h2 class="text-xl font-semibold">í…Œì´ë¸” êµ¬ì¡° ìƒì„±</h2>
            </div>

            <p class="text-gray-600 text-sm mb-6">ì•„ë˜ 3ê°œì˜ í…Œì´ë¸”ì„ ìƒì„±í•´ì£¼ì„¸ìš”. ê° í…Œì´ë¸”ì˜ í•„ë“œë¥¼ ì •í™•íˆ ë§ì¶°ì£¼ì„¸ìš”.</p>

            <!-- Table 1: daily_analytics -->
            <div class="border rounded-lg mb-6">
                <div class="bg-blue-50 px-4 py-3 border-b flex items-center justify-between">
                    <div>
                        <h3 class="font-semibold text-blue-800">ğŸ“… daily_analytics</h3>
                        <p class="text-xs text-blue-600">ì¼ë³„ í†µê³„ ë°ì´í„° ì €ì¥</p>
                    </div>
                    <button onclick="copyText('daily_analytics')" class="copy-btn text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded hover:bg-blue-200">í…Œì´ë¸”ëª… ë³µì‚¬</button>
                </div>
                <div class="p-4">
                    <table class="w-full text-sm">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="text-left p-2 font-medium">í•„ë“œëª…</th>
                                <th class="text-left p-2 font-medium">íƒ€ì…</th>
                                <th class="text-left p-2 font-medium">ì„¤ëª…</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y">
                            <tr><td class="p-2"><code class="bg-gray-100 px-1 rounded">date</code></td><td class="p-2">Date</td><td class="p-2 text-gray-600">ë‚ ì§œ (Primary)</td></tr>
                            <tr><td class="p-2"><code class="bg-gray-100 px-1 rounded">visitors</code></td><td class="p-2">Number</td><td class="p-2 text-gray-600">ë°©ë¬¸ì ìˆ˜</td></tr>
                            <tr><td class="p-2"><code class="bg-gray-100 px-1 rounded">pageviews</code></td><td class="p-2">Number</td><td class="p-2 text-gray-600">í˜ì´ì§€ë·°</td></tr>
                            <tr><td class="p-2"><code class="bg-gray-100 px-1 rounded">sessions</code></td><td class="p-2">Number</td><td class="p-2 text-gray-600">ì„¸ì…˜ ìˆ˜</td></tr>
                            <tr><td class="p-2"><code class="bg-gray-100 px-1 rounded">newUsers</code></td><td class="p-2">Number</td><td class="p-2 text-gray-600">ì‹ ê·œ ì‚¬ìš©ì</td></tr>
                            <tr><td class="p-2"><code class="bg-gray-100 px-1 rounded">bounceRate</code></td><td class="p-2">Number</td><td class="p-2 text-gray-600">ì´íƒˆë¥  (%)</td></tr>
                            <tr><td class="p-2"><code class="bg-gray-100 px-1 rounded">avgDuration</code></td><td class="p-2">Number</td><td class="p-2 text-gray-600">í‰ê·  ì²´ë¥˜ì‹œê°„ (ì´ˆ)</td></tr>
                            <tr><td class="p-2"><code class="bg-gray-100 px-1 rounded">collected_at</code></td><td class="p-2">Date (with time)</td><td class="p-2 text-gray-600">ìˆ˜ì§‘ ì‹œê°„</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Table 2: traffic_sources -->
            <div class="border rounded-lg mb-6">
                <div class="bg-green-50 px-4 py-3 border-b flex items-center justify-between">
                    <div>
                        <h3 class="font-semibold text-green-800">ğŸ”— traffic_sources</h3>
                        <p class="text-xs text-green-600">íŠ¸ë˜í”½ ìœ ì… ì†ŒìŠ¤ ë°ì´í„°</p>
                    </div>
                    <button onclick="copyText('traffic_sources')" class="copy-btn text-xs bg-green-100 text-green-600 px-2 py-1 rounded hover:bg-green-200">í…Œì´ë¸”ëª… ë³µì‚¬</button>
                </div>
                <div class="p-4">
                    <table class="w-full text-sm">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="text-left p-2 font-medium">í•„ë“œëª…</th>
                                <th class="text-left p-2 font-medium">íƒ€ì…</th>
                                <th class="text-left p-2 font-medium">ì„¤ëª…</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y">
                            <tr><td class="p-2"><code class="bg-gray-100 px-1 rounded">date</code></td><td class="p-2">Date</td><td class="p-2 text-gray-600">ìˆ˜ì§‘ ë‚ ì§œ</td></tr>
                            <tr><td class="p-2"><code class="bg-gray-100 px-1 rounded">channel</code></td><td class="p-2">Single line text</td><td class="p-2 text-gray-600">ì±„ë„ (organic, direct ë“±)</td></tr>
                            <tr><td class="p-2"><code class="bg-gray-100 px-1 rounded">visitors</code></td><td class="p-2">Number</td><td class="p-2 text-gray-600">ë°©ë¬¸ì ìˆ˜</td></tr>
                            <tr><td class="p-2"><code class="bg-gray-100 px-1 rounded">sessions</code></td><td class="p-2">Number</td><td class="p-2 text-gray-600">ì„¸ì…˜ ìˆ˜</td></tr>
                            <tr><td class="p-2"><code class="bg-gray-100 px-1 rounded">percentage</code></td><td class="p-2">Number</td><td class="p-2 text-gray-600">ë¹„ìœ¨ (%)</td></tr>
                            <tr><td class="p-2"><code class="bg-gray-100 px-1 rounded">bounceRate</code></td><td class="p-2">Number</td><td class="p-2 text-gray-600">ì´íƒˆë¥  (%)</td></tr>
                            <tr><td class="p-2"><code class="bg-gray-100 px-1 rounded">avgDuration</code></td><td class="p-2">Number</td><td class="p-2 text-gray-600">í‰ê·  ì²´ë¥˜ì‹œê°„ (ì´ˆ)</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Table 3: cache_metadata -->
            <div class="border rounded-lg">
                <div class="bg-orange-50 px-4 py-3 border-b flex items-center justify-between">
                    <div>
                        <h3 class="font-semibold text-orange-800">âš™ï¸ cache_metadata</h3>
                        <p class="text-xs text-orange-600">ìºì‹œ ë©”íƒ€ë°ì´í„° (ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸ ì‹œê°„ ë“±)</p>
                    </div>
                    <button onclick="copyText('cache_metadata')" class="copy-btn text-xs bg-orange-100 text-orange-600 px-2 py-1 rounded hover:bg-orange-200">í…Œì´ë¸”ëª… ë³µì‚¬</button>
                </div>
                <div class="p-4">
                    <table class="w-full text-sm">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="text-left p-2 font-medium">í•„ë“œëª…</th>
                                <th class="text-left p-2 font-medium">íƒ€ì…</th>
                                <th class="text-left p-2 font-medium">ì„¤ëª…</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y">
                            <tr><td class="p-2"><code class="bg-gray-100 px-1 rounded">cache_key</code></td><td class="p-2">Single line text</td><td class="p-2 text-gray-600">ìºì‹œ í‚¤ (Primary)</td></tr>
                            <tr><td class="p-2"><code class="bg-gray-100 px-1 rounded">last_updated</code></td><td class="p-2">Date (with time)</td><td class="p-2 text-gray-600">ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸</td></tr>
                            <tr><td class="p-2"><code class="bg-gray-100 px-1 rounded">status</code></td><td class="p-2">Single select</td><td class="p-2 text-gray-600">success / error / pending</td></tr>
                            <tr><td class="p-2"><code class="bg-gray-100 px-1 rounded">record_count</code></td><td class="p-2">Number</td><td class="p-2 text-gray-600">ì €ì¥ëœ ë ˆì½”ë“œ ìˆ˜</td></tr>
                            <tr><td class="p-2"><code class="bg-gray-100 px-1 rounded">error_message</code></td><td class="p-2">Long text</td><td class="p-2 text-gray-600">ì—ëŸ¬ ë©”ì‹œì§€ (ìˆëŠ” ê²½ìš°)</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Step 3: API í‚¤ ë°œê¸‰ -->
        <div class="bg-white rounded-xl p-6 mb-6 shadow-sm">
            <div class="flex items-center gap-3 mb-4">
                <span class="w-8 h-8 bg-purple-100 text-purple-600 rounded-full flex items-center justify-center font-bold">3</span>
                <h2 class="text-xl font-semibold">API í‚¤ ë°œê¸‰</h2>
            </div>

            <div class="space-y-4">
                <div class="flex items-start gap-3">
                    <div class="w-6 h-6 rounded-full bg-gray-100 flex items-center justify-center text-sm mt-0.5">1</div>
                    <div>
                        <p class="font-medium">Airtable API í˜ì´ì§€ ì ‘ì†</p>
                        <a href="https://airtable.com/create/tokens" target="_blank" class="text-purple-600 hover:underline text-sm">https://airtable.com/create/tokens â†’</a>
                    </div>
                </div>

                <div class="flex items-start gap-3">
                    <div class="w-6 h-6 rounded-full bg-gray-100 flex items-center justify-center text-sm mt-0.5">2</div>
                    <div>
                        <p class="font-medium">Personal Access Token ìƒì„±</p>
                        <p class="text-gray-600 text-sm"><span class="bg-gray-100 px-2 py-0.5 rounded">+ Create new token</span> í´ë¦­</p>
                    </div>
                </div>

                <div class="flex items-start gap-3">
                    <div class="w-6 h-6 rounded-full bg-gray-100 flex items-center justify-center text-sm mt-0.5">3</div>
                    <div>
                        <p class="font-medium">í† í° ì„¤ì •</p>
                        <ul class="text-gray-600 text-sm mt-1 space-y-1">
                            <li>â€¢ Name: <code class="bg-gray-100 px-1 rounded">polarad-analytics</code></li>
                            <li>â€¢ Scopes: <code class="bg-gray-100 px-1 rounded">data.records:read</code>, <code class="bg-gray-100 px-1 rounded">data.records:write</code></li>
                            <li>â€¢ Access: ìƒì„±í•œ Base ì„ íƒ (<code class="bg-gray-100 px-1 rounded">polarad-analytics-cache</code>)</li>
                        </ul>
                    </div>
                </div>

                <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                    <p class="text-yellow-800 text-sm font-medium">âš ï¸ ì¤‘ìš”</p>
                    <p class="text-yellow-700 text-sm">í† í°ì€ í•œ ë²ˆë§Œ í‘œì‹œë©ë‹ˆë‹¤. ë°˜ë“œì‹œ ë³µì‚¬í•´ë‘ì„¸ìš”!</p>
                </div>
            </div>
        </div>

        <!-- Step 4: Base ID í™•ì¸ ë° í™˜ê²½ë³€ìˆ˜ -->
        <div class="bg-white rounded-xl p-6 mb-6 shadow-sm">
            <div class="flex items-center gap-3 mb-4">
                <span class="w-8 h-8 bg-purple-100 text-purple-600 rounded-full flex items-center justify-center font-bold">4</span>
                <h2 class="text-xl font-semibold">Base ID í™•ì¸ ë° í™˜ê²½ë³€ìˆ˜ ì„¤ì •</h2>
            </div>

            <div class="space-y-4 mb-6">
                <div class="flex items-start gap-3">
                    <div class="w-6 h-6 rounded-full bg-gray-100 flex items-center justify-center text-sm mt-0.5">1</div>
                    <div>
                        <p class="font-medium">Base ID í™•ì¸</p>
                        <p class="text-gray-600 text-sm">ìƒì„±í•œ Base ì—´ê¸° â†’ URLì—ì„œ <code class="bg-gray-100 px-1 rounded">app</code>ìœ¼ë¡œ ì‹œì‘í•˜ëŠ” ë¶€ë¶„ì´ Base ID</p>
                        <p class="text-gray-500 text-xs mt-1">ì˜ˆ: airtable.com/<strong class="text-purple-600">appXXXXXXXXXXXXXX</strong>/...</p>
                    </div>
                </div>
            </div>

            <!-- Input Fields -->
            <div class="space-y-4 mb-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Airtable API Token</label>
                    <input type="text" id="apiToken" placeholder="pat_xxxxxxxxxxx..." class="w-full border rounded-lg px-3 py-2 text-sm" oninput="updateEnvVars()">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Base ID</label>
                    <input type="text" id="baseId" placeholder="appXXXXXXXXXXXXXX" class="w-full border rounded-lg px-3 py-2 text-sm" oninput="updateEnvVars()">
                </div>
            </div>

            <!-- Generated Env Vars -->
            <div class="bg-gray-900 rounded-lg p-4">
                <div class="flex items-center justify-between mb-2">
                    <span class="text-gray-400 text-sm">.env.localì— ì¶”ê°€í•  ë‚´ìš©</span>
                    <button onclick="copyEnvVars()" class="copy-btn text-xs bg-gray-700 text-gray-300 px-2 py-1 rounded hover:bg-gray-600">ì „ì²´ ë³µì‚¬</button>
                </div>
                <pre id="envVarsOutput" class="text-green-400 text-sm overflow-x-auto">
# Airtable ìºì‹œ ì„¤ì •
AIRTABLE_API_TOKEN=<span class="text-gray-500">[ìœ„ì— ì…ë ¥]</span>
AIRTABLE_BASE_ID=<span class="text-gray-500">[ìœ„ì— ì…ë ¥]</span>
</pre>
            </div>
        </div>

        <!-- Completion -->
        <div class="bg-gradient-to-r from-green-500 to-emerald-500 rounded-xl p-6 text-white">
            <h2 class="text-xl font-bold mb-2">ğŸ‰ ì„¤ì • ì™„ë£Œ í›„</h2>
            <p class="text-green-100 mb-4">ìœ„ ì •ë³´ë¥¼ ì œê³µí•´ì£¼ì‹œë©´ ë‹¤ìŒ ë‹¨ê³„ë¥¼ ì§„í–‰í•©ë‹ˆë‹¤:</p>
            <ul class="space-y-2 text-sm">
                <li class="flex items-center gap-2">
                    <span class="w-5 h-5 bg-white/20 rounded flex items-center justify-center">1</span>
                    <span>Airtable ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜</span>
                </li>
                <li class="flex items-center gap-2">
                    <span class="w-5 h-5 bg-white/20 rounded flex items-center justify-center">2</span>
                    <span>ìºì‹œ ë¡œì§ êµ¬í˜„ (lib/airtable-cache.ts)</span>
                </li>
                <li class="flex items-center gap-2">
                    <span class="w-5 h-5 bg-white/20 rounded flex items-center justify-center">3</span>
                    <span>Cron Job API êµ¬í˜„ (/api/cron/collect-analytics)</span>
                </li>
                <li class="flex items-center gap-2">
                    <span class="w-5 h-5 bg-white/20 rounded flex items-center justify-center">4</span>
                    <span>API ë¼ìš°íŠ¸ ì—°ë™</span>
                </li>
            </ul>
        </div>

        <!-- Footer -->
        <div class="text-center mt-8 text-gray-500 text-sm">
            <p>ë¬¸ì œê°€ ìˆìœ¼ì‹œë©´ ë§ì”€í•´ì£¼ì„¸ìš” ğŸ˜Š</p>
        </div>
    </div>

    <script>
        function copyText(text) {
            navigator.clipboard.writeText(text).then(() => {
                showToast('ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
            });
        }

        function updateEnvVars() {
            const token = document.getElementById('apiToken').value || '[ìœ„ì— ì…ë ¥]';
            const baseId = document.getElementById('baseId').value || '[ìœ„ì— ì…ë ¥]';

            document.getElementById('envVarsOutput').innerHTML = `
# Airtable ìºì‹œ ì„¤ì •
AIRTABLE_API_TOKEN=${token}
AIRTABLE_BASE_ID=${baseId}
`;
        }

        function copyEnvVars() {
            const token = document.getElementById('apiToken').value;
            const baseId = document.getElementById('baseId').value;

            if (!token || !baseId) {
                showToast('API Tokenê³¼ Base IDë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”', 'error');
                return;
            }

            const envVars = `# Airtable ìºì‹œ ì„¤ì •
AIRTABLE_API_TOKEN=${token}
AIRTABLE_BASE_ID=${baseId}`;

            navigator.clipboard.writeText(envVars).then(() => {
                showToast('í™˜ê²½ë³€ìˆ˜ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
            });
        }

        function toggleStep(step) {
            const dot = document.getElementById(`step${step}-dot`);
            dot.classList.toggle('step-complete');
        }

        function showToast(message, type = 'success') {
            const toast = document.createElement('div');
            toast.className = `fixed bottom-4 right-4 px-4 py-2 rounded-lg text-white text-sm ${type === 'error' ? 'bg-red-500' : 'bg-green-500'} shadow-lg z-50`;
            toast.textContent = message;
            document.body.appendChild(toast);
            setTimeout(() => toast.remove(), 2000);
        }
    </script>
</body>
</html>
